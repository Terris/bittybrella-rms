# Migration `20200523051150-add-tickets-to-product`

This migration has been generated by Terris Kremer at 5/23/2020, 5:11:50 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."_ProductToTicket" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

ALTER TABLE "public"."Product" DROP CONSTRAINT IF EXiSTS "Product_ticketId_fkey",
DROP COLUMN "ticketId";

CREATE UNIQUE INDEX "_ProductToTicket_AB_unique" ON "public"."_ProductToTicket"("A","B")

CREATE  INDEX "_ProductToTicket_B_index" ON "public"."_ProductToTicket"("B")

ALTER TABLE "public"."_ProductToTicket" ADD FOREIGN KEY ("A")REFERENCES "public"."Product"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ProductToTicket" ADD FOREIGN KEY ("B")REFERENCES "public"."Ticket"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200521130257-create-tickets..20200523051150-add-tickets-to-product
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -17,8 +17,9 @@
   description String
   price       Float
   cost        Float
   menus       Menu[]    @relation(references: [id])
+  tickets     Ticket[]  @relation(references: [id])
   createdAt   DateTime  @default(now())
 }
 model Menu {
```


